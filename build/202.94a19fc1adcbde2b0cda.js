"use strict";(self.webpackChunkinnova_ipr=self.webpackChunkinnova_ipr||[]).push([[202],{3202:(e,n,r)=>{r.r(n),r.d(n,{default:()=>N});var t=r(5893),a=r(2553);var s=r(7536),i=r(7702),l=r(823),o=r(3416),c=r(3166);var u=r(4425),f=r(7003),d=r(8499),p=r(2691),h=function(){var e=(0,s.cI)(),n=e.register,r=e.handleSubmit,a=e.reset,h=(0,u.s)(),v=(0,f.C)((function(e){return e.user})),m=v.user,g=v.authData,b=function(e){var n=e.message;n&&""!==n.trim()&&(h.emit("send_message",{message:n,id:(0,o.x0)(),sender:(null==m?void 0:m.firstName)||(null==m?void 0:m.username),senderId:null==g?void 0:g.id}),a())};return(0,t.jsxs)("form",{name:"formMessage",onSubmit:r(b),className:"LFx5lNsf",children:[(0,t.jsx)(i.Z,{title:"Для быстрой вставки текста и отправки сообщения кликните два раза",style:{width:"100%"},children:(0,t.jsx)(c.I,{fieldName:"message",register:n,id:"message",className:"fk1qlI4S",rules:{required:!0},autoComplete:"off",placeholder:"Введите сообщение...",onDoubleClick:function(){return e=void 0,n=void 0,t=function(){var e;return function(e,n){var r,t,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(l){return function(o){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(r=1,t&&(a=2&l[0]?t.return:l[0]?t.throw||((a=t.return)&&a.call(t),0):t.next)&&!(a=a.call(t,l[1])).done)return a;switch(t=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,t=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=n.call(e,i)}catch(e){l=[6,e],t=0}finally{r=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,o])}}}(this,(function(n){switch(n.label){case 0:return[4,p.T.pasteText()];case 1:return e=n.sent(),b({message:e}),[2]}}))},new((r=void 0)||(r=Promise))((function(a,s){function i(e){try{o(t.next(e))}catch(e){s(e)}}function l(e){try{o(t.throw(e))}catch(e){s(e)}}function o(e){var n;e.done?a(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,l)}o((t=t.apply(e,n||[])).next())}));var e,n,r,t}})}),(0,t.jsx)(d.h,{label:"Фото",onChange:function(e){var n=new FileReader,r=e.target.files[0];r&&(n.onload=function(e){var n=e.target.result;h.emit("send_message",{message:"",id:(0,o.x0)(),sender:(null==m?void 0:m.firstName)||(null==m?void 0:m.username),senderId:null==g?void 0:g.id,file:n})},n.readAsDataURL(r))}}),(0,t.jsx)(l.ZP,{htmlType:"submit",children:"Отправить"})]})},v=r(7294),m=r(4184),g=r.n(m),b=r(1659),x=r(1532),y=function(e,n,r){if(r||2===arguments.length)for(var t,a=0,s=n.length;a<s;a++)!t&&a in n||(t||(t=Array.prototype.slice.call(n,0,a)),t[a]=n[a]);return e.concat(t||Array.prototype.slice.call(n))},j=function(){var e=(0,v.useState)([]),n=e[0],r=e[1],a=(0,u.s)(),s=(0,x.a)().id;return(0,v.useEffect)((function(){a.on("receive_message",(function(e){r((function(n){return y(y([],n,!0),[e],!1)}))}))}),[]),(0,t.jsx)("div",{className:"etkvg7Eo",children:n.map((function(e){var n=e.message,r=e.id,a=e.sender,i=e.senderId,l=e.file;return(0,t.jsxs)("div",{className:g()("lSut7kJu",s===i?"e0Wvq6lv":"tGLeh5KS"),children:[(0,t.jsx)("p",{children:"".concat(a,": ").concat(n)}),l&&(0,t.jsx)(b.Z,{src:l,alt:"file",width:200})]},r)}))})},w=function(){return(0,t.jsxs)("div",{className:"DTt5MrHd",children:[(0,t.jsx)(j,{}),(0,t.jsx)(h,{})]})};const N=function(){return(0,t.jsx)(a.X2,{className:"cnMZBi0i",children:(0,t.jsx)(a.JX,{className:"DDoSEsk3",children:(0,t.jsx)(w,{})})})}},2691:(e,n,r)=>{r.d(n,{T:()=>t});var t={copyText:function(e){return navigator.clipboard.writeText(e).then((function(e){return e})).catch((function(e){return console.error(e),""}))},pasteText:function(){return navigator.clipboard.readText().then((function(e){return e})).catch((function(e){return console.error(e),""}))}}},8499:(e,n,r)=>{r.d(n,{h:()=>a});var t=r(5893);var a=function(e){var n=e.accept,r=void 0===n?"image/png, image/jpeg":n,a=e.onChange,s=e.label,i=void 0===s?"Выберите файл":s;return(0,t.jsxs)("label",{className:"rZNh8Dm5",children:[i,(0,t.jsx)("input",{type:"file",accept:r,onChange:a,className:"luYGfs7s"})]})}},3166:(e,n,r)=>{r.d(n,{I:()=>l});var t=r(5893),a=r(4184),s=r.n(a);var i=function(){return i=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var a in n=arguments[r])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},i.apply(this,arguments)},l=function(e){var n=e.fieldName,r=e.id,a=e.register,l=e.rules,o=void 0===l?{}:l,c=e.label,u=e.error,f=e.className,d=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(t=Object.getOwnPropertySymbols(e);a<t.length;a++)n.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(r[t[a]]=e[t[a]])}return r}(e,["fieldName","id","register","rules","label","error","className"]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("label",{htmlFor:r,children:c}),(0,t.jsxs)("div",{className:"qB7FoCJj",children:[(0,t.jsx)("input",i({},a(n,i({},o)),{id:r,className:s()("LVdIPwcx",f)},d)),u&&(0,t.jsx)("p",{className:"BgTYZ9zp",children:u||"Ошибка"})]})]})}}}]);