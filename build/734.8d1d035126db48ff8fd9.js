"use strict";(self.webpackChunkinnova_ipr=self.webpackChunkinnova_ipr||[]).push([[734],{3734:(e,n,r)=>{r.r(n),r.d(n,{default:()=>E});var t=r(5893),a=r(7294),l=r(7835),i=r(1852),o=r(7003),s=r(3314),c=r(7360),u=r(4184),f=r.n(u),d=r(2553),h=r(5884),v=r(823),p=r(8212),m=r(2104),x=r(7536),b=r(6047),y=r(6665);const g="LiHAcGOZ",j="T1tUnazi",w="y9b875tc",N="Bev9KPMO",Z="gyewWwKZ";var k=r(3166),P=r(8499),C=function(){return C=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var a in n=arguments[r])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},C.apply(this,arguments)},O=function(e){var n,r,a,l,i=e.user,s=e.onEditProfile,u=e.onFileChange,Z=e.notify,O=(0,x.cI)({mode:"onBlur",defaultValues:{about:null==i?void 0:i.about}}),T=O.register,X=O.control,J=O.handleSubmit,S=O.formState.errors,E=(0,o.T)();return(0,t.jsx)(d.X2,{className:g,children:(0,t.jsx)(d.JX,{xl:12,children:(0,t.jsxs)("form",{name:"loginForm",onSubmit:J((function(e){return n=void 0,r=void 0,a=function(){var n;return function(e,n){var r,t,a,l,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function o(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,o[0]&&(i=0)),i;)try{if(r=1,t&&(a=2&o[0]?t.return:o[0]?t.throw||((a=t.return)&&a.call(t),0):t.next)&&!(a=a.call(t,o[1])).done)return a;switch(t=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,t=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=n.call(e,i)}catch(e){o=[6,e],t=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,E((0,c.Nq)(e))];case 1:return r.sent(),s(),Z.success({message:"Данные успешно обновлены"}),[3,3];case 2:return n=r.sent(),console.error(n),Z.error({message:n.message}),[3,3];case 3:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,l){function i(e){try{s(a.next(e))}catch(e){l(e)}}function o(e){try{s(a.throw(e))}catch(e){l(e)}}function s(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,o)}s((a=a.apply(n,r||[])).next())}));var n,r,t,a})),children:[(0,t.jsx)(d.JX,{className:j,xl:4,children:(0,t.jsx)("img",{src:(null==i?void 0:i.avatarUrl)||y.Z,alt:"avatar"})}),(0,t.jsxs)(d.JX,{className:f()([w,"E8HyCbnl"]),xl:8,children:[(0,t.jsx)(k.I,{defaultValue:(null==i?void 0:i.firstName)||"",id:"firstName",fieldName:"firstName",register:T,rules:{required:"Поле обязательно к заполнению"},error:null===(n=null==S?void 0:S.firstName)||void 0===n?void 0:n.message}),(0,t.jsx)(k.I,{defaultValue:(null==i?void 0:i.lastName)||"",id:"lastName",fieldName:"lastName",register:T,rules:{required:"Поле обязательно к заполнению"},error:null===(r=null==S?void 0:S.lastName)||void 0===r?void 0:r.message}),(0,t.jsx)(k.I,{defaultValue:(null==i?void 0:i.username)||"",id:"username",fieldName:"username",register:T,rules:{required:"Поле обязательно к заполнению"},error:null===(a=null==S?void 0:S.username)||void 0===a?void 0:a.message})]}),(0,t.jsx)(d.JX,{xl:4,className:N,children:(0,t.jsx)(k.I,{defaultValue:(null==i?void 0:i.email)||"",id:"email",fieldName:"email",register:T,rules:{required:"Поле обязательно к заполнению"},error:null===(l=null==S?void 0:S.email)||void 0===l?void 0:l.message})}),(0,t.jsx)(d.JX,{xl:4,className:N,children:(0,t.jsx)(x.Qr,{name:"about",control:X,render:function(e){var n=e.field;return(0,t.jsx)(b.Z,C({},n,{placeholder:"Добавьте информацию о себе, чтобы другие пользователи больше узнали о вас (например увлечения, хобби и пр.)",defaultValue:(null==i?void 0:i.about)||""}))}})}),(0,t.jsx)(d.JX,{children:(0,t.jsxs)(h.Z,{children:[(0,t.jsx)(P.h,{onChange:u,children:"Обновить фото"}),(0,t.jsx)(v.ZP,{onClick:s,icon:(0,t.jsx)(p.Z,{}),children:"Редактировать профиль"}),(0,t.jsx)(v.ZP,{icon:(0,t.jsx)(m.Z,{}),type:"primary",htmlType:"submit",children:"Сохранить"})]})})]})})})},T=r(7702),X=r(1964),J=r(2691),S=function(e){var n=e.user,r=e.mode,a=e.onFileChange,i=e.onEditProfile,o=l.Z.useNotification(),s=o[0],c=o[1],u=function(e){return n=void 0,r=void 0,a=function(){var n;return function(e,n){var r,t,a,l,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function o(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,o[0]&&(i=0)),i;)try{if(r=1,t&&(a=2&o[0]?t.return:o[0]?t.throw||((a=t.return)&&a.call(t),0):t.next)&&!(a=a.call(t,o[1])).done)return a;switch(t=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,t=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=n.call(e,i)}catch(e){o=[6,e],t=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,J.T.copyText(e)];case 1:return r.sent(),s.success({message:"Данные успешно скопированы"}),[3,3];case 2:return n=r.sent(),console.error(n),s.error({message:"Возникла ошибка, попробуйте еще раз"}),[3,3];case 3:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,l){function i(e){try{s(a.next(e))}catch(e){l(e)}}function o(e){try{s(a.throw(e))}catch(e){l(e)}}function s(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,o)}s((a=a.apply(n,r||[])).next())}));var n,r,t,a};return(0,t.jsxs)(t.Fragment,{children:[c,(0,t.jsx)(d.X2,{className:g,children:(0,t.jsxs)(d.JX,{xl:12,children:[(0,t.jsx)(d.JX,{className:j,xl:4,children:(0,t.jsx)("img",{src:(null==n?void 0:n.avatarUrl)||y.Z,alt:"avatar"})}),(0,t.jsxs)(d.JX,{className:w,xl:4,children:[(0,t.jsx)(T.Z,{title:"Копировать",placement:"right",children:(0,t.jsxs)(X.Z.Title,{level:4,onClick:function(){u("".concat(null==n?void 0:n.firstName," ").concat(null==n?void 0:n.lastName))},className:Z,children:[null==n?void 0:n.firstName," ",null==n?void 0:n.lastName]})}),(0,t.jsx)(X.Z.Title,{level:5,onClick:function(){u("".concat((null==n?void 0:n.username)||""))},className:Z,children:(null==n?void 0:n.username)?"(".concat(null==n?void 0:n.username,")"):""})]}),(0,t.jsx)(d.JX,{xl:2,className:N,children:"Email: ".concat((null==n?void 0:n.email)||"Not email yet :(")}),(0,t.jsx)(d.JX,{xl:4,className:N,children:"О себе: ".concat((null==n?void 0:n.about)||"Добавьте информацию о себе, чтобы другие пользователи больше узнали о вас \n          (например увлечения, хобби и пр.)")}),(0,t.jsx)(d.JX,{children:(0,t.jsxs)(h.Z,{children:[(0,t.jsx)(P.h,{onChange:a,children:"Обновить фото"}),(0,t.jsx)(v.ZP,{onClick:i,icon:(0,t.jsx)(p.Z,{}),children:"Редактировать профиль"}),(0,t.jsx)(v.ZP,{icon:(0,t.jsx)(m.Z,{}),type:"primary",disabled:"view"===r,children:"Сохранить"})]})})]})})]})};const E=function(){var e=(0,o.C)((function(e){return e.user})),n=e.user,r=e.authData,u=e.loading,f=l.Z.useNotification(),d=f[0],h=f[1],v=(0,a.useState)("view"),p=v[0],m=v[1],x=(0,o.T)(),b=function(e){return n=void 0,r=void 0,a=function(){var n,r;return function(e,n){var r,t,a,l,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function o(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,o[0]&&(i=0)),i;)try{if(r=1,t&&(a=2&o[0]?t.return:o[0]?t.throw||((a=t.return)&&a.call(t),0):t.next)&&!(a=a.call(t,o[1])).done)return a;switch(t=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,t=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=n.call(e,i)}catch(e){o=[6,e],t=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),n=e.target.files[0],[4,x((0,c.BA)(n))];case 1:return t.sent(),d.success({message:"Данные успешно обновлены"}),[3,3];case 2:return r=t.sent(),console.error(r),d.error({message:r.message}),[3,3];case 3:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,l){function i(e){try{s(a.next(e))}catch(e){l(e)}}function o(e){try{s(a.throw(e))}catch(e){l(e)}}function s(n){var r;n.done?e(n.value):(r=n.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,o)}s((a=a.apply(n,r||[])).next())}));var n,r,t,a},y=function(){m("view"===p?"edit":"view")};return(null==n?void 0:n.email)&&(null==n?void 0:n.username)?u?(0,t.jsx)(i.Z,{}):(0,t.jsxs)(t.Fragment,{children:[h,"view"===p?(0,t.jsx)(S,{user:n,mode:p,onEditProfile:y,onFileChange:b}):(0,t.jsx)(O,{user:n,authData:r,onFileChange:b,onEditProfile:y,notify:d})]}):(0,t.jsx)(s.w,{})}},6665:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"ab45eb1d42b1faaf3d12b84117e3d937.png"},2691:(e,n,r)=>{r.d(n,{T:()=>t});var t={copyText:function(e){return navigator.clipboard.writeText(e).then((function(e){return e})).catch((function(e){return console.error(e),""}))},pasteText:function(){return navigator.clipboard.readText().then((function(e){return e})).catch((function(e){return console.error(e),""}))}}},8499:(e,n,r)=>{r.d(n,{h:()=>a});var t=r(5893);var a=function(e){var n=e.accept,r=void 0===n?"image/png, image/jpeg":n,a=e.onChange,l=e.label,i=void 0===l?"Выберите файл":l;return(0,t.jsxs)("label",{className:"rZNh8Dm5",children:[i,(0,t.jsx)("input",{type:"file",accept:r,onChange:a,className:"luYGfs7s"})]})}},3166:(e,n,r)=>{r.d(n,{I:()=>o});var t=r(5893),a=r(4184),l=r.n(a);var i=function(){return i=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var a in n=arguments[r])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},i.apply(this,arguments)},o=function(e){var n=e.fieldName,r=e.id,a=e.register,o=e.rules,s=void 0===o?{}:o,c=e.label,u=e.error,f=e.className,d=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(t=Object.getOwnPropertySymbols(e);a<t.length;a++)n.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(r[t[a]]=e[t[a]])}return r}(e,["fieldName","id","register","rules","label","error","className"]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("label",{htmlFor:r,children:c}),(0,t.jsxs)("div",{className:"qB7FoCJj",children:[(0,t.jsx)("input",i({},a(n,i({},s)),{id:r,className:l()("LVdIPwcx",f)},d)),u&&(0,t.jsx)("p",{className:"BgTYZ9zp",children:u||"Ошибка"})]})]})}}}]);